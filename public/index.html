<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>چت پیشرفته | طرح بنفش</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/toast.css">
    <link rel="stylesheet" href="/css/pinned-messages.css">
    <link rel="stylesheet" href="/css/file-upload.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="user-info">
                <input type="text" id="username-input" placeholder="نام کاربری خود را وارد کنید" maxlength="20">
                <button id="set-username">تأیید</button>
            </div>
            <div class="groups">
                <h3>گروه‌ها</h3>
                <div id="group-list"></div>
                <div class="group-actions">
                    <input type="text" id="group-code" placeholder="کد گروه را وارد کنید">
                    <button id="join-group">عضویت در گروه</button>
                    <button id="create-group">ساخت گروه جدید</button>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="chat-area">
            <!-- Pinned Messages -->
            <div class="pinned-messages">
                <h4>پیام‌های پین شده</h4>
                <div id="pinned-messages"></div>
            </div>

            <!-- Messages -->
            <div class="messages-container">
                <div id="messages"></div>
                <div id="typing-indicator" class="typing-indicator"></div>
            </div>

            <!-- Message Input -->
            <div class="message-input-container">
                <div class="input-actions">
                    <label for="file-upload" class="file-upload-label">
                        <span class="icon">📎</span>
                        <input type="file" id="file-upload" multiple>
                    </label>
                    <button id="emoji-picker">😊</button>
                </div>
                <textarea id="message-input" placeholder="پیام خود را بنویسید..."></textarea>
                <button id="send-message">ارسال</button>
            </div>
        </div>

        <!-- Search Panel -->
        <div class="search-panel">
            <div class="search-header">
                <input type="text" id="search-input" placeholder="جستجو در پیام‌ها...">
                <button id="clear-search">پاک کردن</button>
            </div>
            <div id="search-results"></div>
        </div>
    </div>

    <!-- Modal Templates -->
    <template id="modal-template">
        <div class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="modal-body"></div>
            </div>
        </div>
    </template>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/openpgp/dist/openpgp.min.js"></script>
    <script src="/js/chat.js"></script>
</body>
</html>
