{"level":"info","message":"Graceful shutdown handler initialized","service":"chatbox","timestamp":"2025-05-11 16:24:24"}
{"level":"info","message":"Redis modules loaded successfully","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"Attempting to configure Redis adapter...","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"Redis unavailable, using in-memory session store","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"Anti-sleep mechanism not started: not in production or no app URL defined","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"Server registered with graceful shutdown handler","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"سرور در حال اجرا روی پورت 3000","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"حالت: development","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"آدرس دسترسی: http://localhost:3000","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-111,"level":"error","message":"❌ Redis connection error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"chatbox","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)","syscall":"connect","timestamp":"2025-05-11 16:24:25"}
{"level":"info","message":"Falling back to in-memory adapter","service":"chatbox","timestamp":"2025-05-11 16:24:25"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:24:30"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 1000ms (attempt 1/20)","service":"chatbox","timestamp":"2025-05-11 16:24:30"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20167856,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)","timestamp":"2025-05-11 16:24:30"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 1500ms (attempt 2/20)","service":"chatbox","timestamp":"2025-05-11 16:24:30"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20167856,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)","timestamp":"2025-05-11 16:24:30"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:24:31"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:24:36"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 2250ms (attempt 3/20)","service":"chatbox","timestamp":"2025-05-11 16:24:36"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20173840,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:24:36"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 3375ms (attempt 4/20)","service":"chatbox","timestamp":"2025-05-11 16:24:36"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20173840,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:24:36"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:24:38"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:24:43"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 5062.5ms (attempt 5/20)","service":"chatbox","timestamp":"2025-05-11 16:24:43"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20181091,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:24:43"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 7593.75ms (attempt 6/20)","service":"chatbox","timestamp":"2025-05-11 16:24:43"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20181091,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:24:43"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:24:48"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:24:53"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 11390.625ms (attempt 7/20)","service":"chatbox","timestamp":"2025-05-11 16:24:53"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20191160,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:24:53"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 17085.9375ms (attempt 8/20)","service":"chatbox","timestamp":"2025-05-11 16:24:53"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20191160,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:24:53"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:25:04"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:25:09"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 25628.90625ms (attempt 9/20)","service":"chatbox","timestamp":"2025-05-11 16:25:09"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20207558,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:10"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 10/20)","service":"chatbox","timestamp":"2025-05-11 16:25:10"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20207558,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:10"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:25:10"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:25:15"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 11/20)","service":"chatbox","timestamp":"2025-05-11 16:25:15"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20213251,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:15"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 12/20)","service":"chatbox","timestamp":"2025-05-11 16:25:15"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20213251,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:15"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:25:35"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:25:40"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 13/20)","service":"chatbox","timestamp":"2025-05-11 16:25:40"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20238201,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:40"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 14/20)","service":"chatbox","timestamp":"2025-05-11 16:25:40"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20238201,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:40"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:25:45"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:25:50"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 15/20)","service":"chatbox","timestamp":"2025-05-11 16:25:50"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20248251,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:50"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 16/20)","service":"chatbox","timestamp":"2025-05-11 16:25:50"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20248251,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:25:50"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:26:10"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:26:15"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 17/20)","service":"chatbox","timestamp":"2025-05-11 16:26:15"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20273223,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:26:15"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 18/20)","service":"chatbox","timestamp":"2025-05-11 16:26:15"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20273223,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:26:15"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:26:20"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:26:25"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 19/20)","service":"chatbox","timestamp":"2025-05-11 16:26:25"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20283276,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:26:25"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 20/20)","service":"chatbox","timestamp":"2025-05-11 16:26:25"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20283276,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:26:25"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown","service":"chatbox","timestamp":"2025-05-11 16:26:37"}
{"level":"info","message":"Closing Socket.IO connections...","service":"chatbox","timestamp":"2025-05-11 16:26:37"}
{"level":"info","message":"Closing Redis connections...","service":"chatbox","timestamp":"2025-05-11 16:26:37"}
{"level":"warn","message":"Received SIGINT during shutdown, ignoring","service":"chatbox","timestamp":"2025-05-11 16:26:38"}
{"level":"warn","message":"Received SIGINT during shutdown, ignoring","service":"chatbox","timestamp":"2025-05-11 16:26:40"}
{"level":"warn","message":"Received SIGINT during shutdown, ignoring","service":"chatbox","timestamp":"2025-05-11 16:26:40"}
{"level":"warn","message":"Received SIGINT during shutdown, ignoring","service":"chatbox","timestamp":"2025-05-11 16:26:41"}
{"level":"warn","message":"Received SIGINT during shutdown, ignoring","service":"chatbox","timestamp":"2025-05-11 16:26:41"}
{"level":"warn","message":"Received SIGINT during shutdown, ignoring","service":"chatbox","timestamp":"2025-05-11 16:26:43"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:26:45"}
{"level":"error","message":"Graceful shutdown timed out after 10s, forcing exit","service":"chatbox","timestamp":"2025-05-11 16:26:47"}
{"level":"info","message":"Graceful shutdown handler initialized","service":"chatbox","timestamp":"2025-05-11 16:27:19"}
{"level":"info","message":"Redis modules loaded successfully","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"Attempting to configure Redis adapter...","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"Redis unavailable, using in-memory session store","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"Anti-sleep mechanism not started: not in production or no app URL defined","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"Server registered with graceful shutdown handler","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"سرور در حال اجرا روی پورت 3000","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"حالت: development","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"آدرس دسترسی: http://localhost:3000","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-111,"level":"error","message":"❌ Redis connection error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"chatbox","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)","syscall":"connect","timestamp":"2025-05-11 16:27:20"}
{"level":"info","message":"Falling back to in-memory adapter","service":"chatbox","timestamp":"2025-05-11 16:27:20"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:27:25"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 1000ms (attempt 1/20)","service":"chatbox","timestamp":"2025-05-11 16:27:25"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20342630,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)","timestamp":"2025-05-11 16:27:25"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 1500ms (attempt 2/20)","service":"chatbox","timestamp":"2025-05-11 16:27:25"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20342630,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)","timestamp":"2025-05-11 16:27:25"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:27:26"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:27:31"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 2250ms (attempt 3/20)","service":"chatbox","timestamp":"2025-05-11 16:27:31"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20348607,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:27:31"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 3375ms (attempt 4/20)","service":"chatbox","timestamp":"2025-05-11 16:27:31"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20348607,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:27:31"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:27:33"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:27:38"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 5062.5ms (attempt 5/20)","service":"chatbox","timestamp":"2025-05-11 16:27:38"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20355863,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:27:38"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 7593.75ms (attempt 6/20)","service":"chatbox","timestamp":"2025-05-11 16:27:38"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20355863,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:27:38"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:27:43"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:27:48"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 11390.625ms (attempt 7/20)","service":"chatbox","timestamp":"2025-05-11 16:27:48"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20365934,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:27:48"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 17085.9375ms (attempt 8/20)","service":"chatbox","timestamp":"2025-05-11 16:27:48"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20365934,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:27:48"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:27:59"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:28:04"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 25628.90625ms (attempt 9/20)","service":"chatbox","timestamp":"2025-05-11 16:28:04"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20382333,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:04"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 10/20)","service":"chatbox","timestamp":"2025-05-11 16:28:04"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20382333,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:04"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:28:05"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:28:10"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 11/20)","service":"chatbox","timestamp":"2025-05-11 16:28:10"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20388023,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:10"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 12/20)","service":"chatbox","timestamp":"2025-05-11 16:28:10"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20388023,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:10"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:28:30"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:28:35"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 13/20)","service":"chatbox","timestamp":"2025-05-11 16:28:35"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20412971,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:35"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 14/20)","service":"chatbox","timestamp":"2025-05-11 16:28:35"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20412971,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:35"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:28:40"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:28:45"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 15/20)","service":"chatbox","timestamp":"2025-05-11 16:28:45"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20423025,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:45"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 16/20)","service":"chatbox","timestamp":"2025-05-11 16:28:45"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20423025,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:28:45"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:29:05"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:29:10"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 17/20)","service":"chatbox","timestamp":"2025-05-11 16:29:10"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20447981,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:10"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 18/20)","service":"chatbox","timestamp":"2025-05-11 16:29:10"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20447981,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:10"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:29:15"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:29:20"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 19/20)","service":"chatbox","timestamp":"2025-05-11 16:29:20"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20458060,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:20"}
{"level":"info","message":"Attempting to reconnect to MongoDB in 30000ms (attempt 20/20)","service":"chatbox","timestamp":"2025-05-11 16:29:20"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20458060,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:20"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:29:40"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:29:45"}
{"level":"error","message":"Failed to reconnect to MongoDB after 20 attempts","service":"chatbox","timestamp":"2025-05-11 16:29:45"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20482992,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:45"}
{"level":"error","message":"Failed to reconnect to MongoDB after 20 attempts","service":"chatbox","timestamp":"2025-05-11 16:29:45"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20482992,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:45"}
{"level":"info","message":"Connecting to MongoDB...","service":"chatbox","timestamp":"2025-05-11 16:29:50"}
{"level":"warn","message":"MongoDB disconnected","service":"chatbox","timestamp":"2025-05-11 16:29:55"}
{"level":"error","message":"Failed to reconnect to MongoDB after 20 attempts","service":"chatbox","timestamp":"2025-05-11 16:29:55"}
{"errorLabelSet":{},"level":"error","message":"MongoDB initial connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20493060,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1096:11)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:55"}
{"level":"error","message":"Failed to reconnect to MongoDB after 20 attempts","service":"chatbox","timestamp":"2025-05-11 16:29:55"}
{"cause":{"beforeHandshake":false,"errorLabelSet":{}},"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":30000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"127.0.0.1:27017":{"$clusterTime":null,"address":"127.0.0.1:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":20493060,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"chatbox","stack":"MongoServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at Topology.selectServer (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:321:38)\n    at async Topology._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:200:28)\n    at async Topology.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/sdam/topology.js:152:13)\n    at async topologyConnect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:233:17)\n    at async MongoClient._connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:246:13)\n    at async MongoClient.connect (/workspaces/Real-Time-chatbox/node_modules/mongodb/lib/mongo_client.js:171:13)\n    at async NativeConnection.createClient (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:336:3)\n    at async NativeConnection.openUri (/workspaces/Real-Time-chatbox/node_modules/mongoose/lib/connection.js:1094:5)\n    at async MongoDBManager.connect (/workspaces/Real-Time-chatbox/utils/mongoManager.js:47:7)\n    at async Timeout._onTimeout (/workspaces/Real-Time-chatbox/utils/mongoManager.js:104:11)","timestamp":"2025-05-11 16:29:55"}
{"level":"info","message":"Received SIGTERM, starting graceful shutdown","service":"chatbox","timestamp":"2025-05-11 16:31:37"}
{"level":"info","message":"Closing Socket.IO connections...","service":"chatbox","timestamp":"2025-05-11 16:31:37"}
{"level":"info","message":"Closing Redis connections...","service":"chatbox","timestamp":"2025-05-11 16:31:37"}
{"level":"error","message":"Graceful shutdown timed out after 10s, forcing exit","service":"chatbox","timestamp":"2025-05-11 16:31:47"}
{"level":"info","message":"Graceful shutdown handler initialized","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Redis modules loaded successfully","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"SKIP_MONGODB=true: Running in test mode without MongoDB connection","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Attempting to configure Redis adapter...","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Redis unavailable, using in-memory session store","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Anti-sleep mechanism not started: not in production or no app URL defined","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Server registered with graceful shutdown handler","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"سرور در حال اجرا روی پورت 3000","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"حالت: development","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"آدرس دسترسی: http://localhost:3000","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-111,"level":"error","message":"❌ Redis connection error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"chatbox","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)","syscall":"connect","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Falling back to in-memory adapter","service":"chatbox","timestamp":"2025-05-11 16:31:51"}
{"level":"info","message":"Received SIGTERM, starting graceful shutdown","service":"chatbox","timestamp":"2025-05-11 17:11:43"}
{"level":"info","message":"Closing Socket.IO connections...","service":"chatbox","timestamp":"2025-05-11 17:11:43"}
{"level":"info","message":"Closing Redis connections...","service":"chatbox","timestamp":"2025-05-11 17:11:43"}
{"level":"info","message":"Graceful shutdown handler initialized","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"Redis modules loaded successfully","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"SKIP_MONGODB=true: Running in test mode without MongoDB connection","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"Attempting to configure Redis adapter...","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"Redis unavailable, using in-memory session store","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"Anti-sleep mechanism not started: not in production or no app URL defined","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"Server registered with graceful shutdown handler","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"سرور در حال اجرا روی پورت 3000","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"حالت: development","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"آدرس دسترسی: http://localhost:3000","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-111,"level":"error","message":"❌ Redis connection error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"chatbox","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)","syscall":"connect","timestamp":"2025-05-11 17:11:44"}
{"level":"info","message":"Falling back to in-memory adapter","service":"chatbox","timestamp":"2025-05-11 17:11:44"}
{"level":"error","message":"Graceful shutdown timed out after 10s, forcing exit","service":"chatbox","timestamp":"2025-05-11 17:11:53"}
