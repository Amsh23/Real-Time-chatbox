# ğŸŒ Real-Time Chatbox ğŸš€

ÛŒÚ© Ú†Øª Ø±ÙˆÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Ø§Ù…Ú©Ø§Ù† Ú†Øª Ø®ØµÙˆØµÛŒ Ùˆ Ú¯Ø±ÙˆÙ‡ÛŒØŒ Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ Ùˆ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø²ÛŒØ¨Ø§

## âœ¨ Features

âœ… Ú†Øª Ø¯Ø± Ø²Ù…Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ Socket.IO  
âœ… Ù‚Ø§Ø¨Ù„ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§  
âœ… Ø§Ù…Ú©Ø§Ù† Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ (ØªØµÙˆÛŒØ±ØŒ ÙˆÛŒØ¯ÛŒÙˆØŒ PDF)  
âœ… Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ  
âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©/Ø±ÙˆØ´Ù†  
âœ… Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†  
âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ  
âœ… Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†

## ğŸ”§ Recent Fixes

- Fixed Persian text concatenation issue in group join notifications
- Fixed getFileIcon function that was missing return statement
- Removed duplicate function and variable declarations
- Standardized template literals and string formatting throughout the codebase
- Improved code organization and readability

## âš¡ Quick Setup (Run Locally)

### 1ï¸âƒ£ Clone the Repository
```bash
git clone https://github.com/YOUR_USERNAME/Real-Time-chatbox.git
cd Real-Time-chatbox
```

### 2ï¸âƒ£ Install Dependencies
```bash
npm install
```

### 3ï¸âƒ£ Create Configuration File
Create a `.env` file in the root of the project:
```
PORT=3000
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
MONGODB_URI=mongodb://127.0.0.1:27017/chatapp
```

### 4ï¸âƒ£ Start the Server
```bash
npm start
```

âœ… Open `http://localhost:3000` in your browser and start chatting! ğŸ’¬

## ğŸŒ Deployment to Render

### Prerequisites

1. A [Render.com](https://render.com) account
2. A [MongoDB Atlas](https://www.mongodb.com/atlas/database) free cluster for database

### Setting up MongoDB Atlas

1. Create a MongoDB Atlas account and log in
2. Create a new free cluster (M0)
3. Under Security > Database Access, create a database user with read/write permissions
4. Under Security > Network Access, add your IP to the list (or use 0.0.0.0/0 for all IPs)
5. Under Databases > Connect, choose "Connect your application" and copy the connection string
6. Replace `<password>` with your database user's password in the connection string

### Deploying to Render (One-Click Method)

1. Fork this repository to your GitHub account
2. Click the button below to deploy:

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy)

3. Connect your GitHub account to Render
4. Add the required environment variables:
   - `NODE_ENV`: `production`
   - `MONGODB_URI`: Your MongoDB Atlas connection string
   - `SESSION_SECRET`: Generate a random string
   - `NODE_OPTIONS`: `--max_old_space_size=512`

### Manual Deployment to Render

1. Log in to your [Render Dashboard](https://dashboard.render.com/)
2. Click "New" and select "Web Service"
3. Connect your GitHub repository
4. Configure the service:
   - **Name**: `real-time-chatbox` (or any name you prefer)
   - **Environment**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Plan**: Free
5. Add the environment variables:
   - `NODE_ENV`: `production`
   - `MONGODB_URI`: Your MongoDB Atlas connection string
   - `SESSION_SECRET`: Generate a random string
   - `NODE_OPTIONS`: `--max_old_space_size=512`
6. Click "Create Web Service"

The deployment will take a few minutes. Once completed, your chat application will be available at the URL provided by Render.

### Important Notes About Free Tier

- The free tier instance will sleep after 15 minutes of inactivity
- The application includes an anti-sleep mechanism to prevent this when users are active
- To minimize cold starts, visit your app regularly or set up a monitoring service
- Free tier has 512MB RAM limit, the app is optimized to work within this constraint

## ğŸ› ï¸ Tech Stack

- ğŸš€ **Node.js** â€“ Backend
- âš¡ **Express.js** â€“ Server Framework
- ğŸ’¾ **MongoDB** â€“ Database
- ğŸ”„ **Socket.IO** â€“ Real-time Communication
- ğŸ”’ **AES-256-GCM** â€“ Message Encryption
- âš™ï¸ **Redis** (optional) â€“ Session Store & Socket.IO Adapter

## ğŸ“‹ Environment Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `NODE_ENV` | Environment setting | `production` or `development` |
| `PORT` | Port number | `10000` |
| `MONGODB_URI` | MongoDB connection URL | `mongodb+srv://...` |
| `SESSION_SECRET` | Secret for session cookies | Random string |
| `ADMIN_API_KEY` | Key for admin API access | Random string |
| `MAX_FILE_SIZE` | Maximum file upload size (bytes) | `15728640` (15MB) |
| `ALLOWED_FILE_TYPES` | Comma-separated list of file extensions | `jpeg,jpg,png,gif,mp4,webm,pdf` |
| `MESSAGE_CACHE_SIZE` | Number of messages to cache | `50` |

## ğŸ“Š Architecture Diagram

```mermaid
graph TD;
    User1["User 1"] -->|"Messages"| Server["Server (Node.js)"];
    User2["User 2"] -->|"Messages"| Server;
    Server -->|"Broadcast"| User1;
    Server -->|"Broadcast"| User2;
    Server -->|"Store"| Database["MongoDB"];
    Server -->|"Cache"| Redis["Redis (optional)"];
    Server -.->|"Hosted on"| Render["Render.com"];
```

## ğŸ“ License

MIT
